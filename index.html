<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bit√°cora Virtual ‚Äî Admin</title>
  <link rel="stylesheet" href="./styles.css" />
  <style>
    /* Estilos SOLO para el men√∫ del panel Admin (no toca styles.css) */
    .admin-menu-grid{display:grid;grid-template-columns:repeat(4,minmax(180px,1fr));gap:14px;margin-top:14px}
    @media (max-width: 1020px){.admin-menu-grid{grid-template-columns:repeat(2,minmax(180px,1fr));}}
    @media (max-width: 560px){.admin-menu-grid{grid-template-columns:1fr;}}

    .admin-menu-card{width:100%;text-align:left;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.04);border-radius:14px;padding:14px 14px 12px 14px;cursor:pointer;transition:transform .08s ease, background .12s ease, border-color .12s ease;box-shadow:0 8px 26px rgba(0,0,0,.22)}
    .admin-menu-card:hover{transform:translateY(-1px);background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.18)}
    .admin-menu-card:active{transform:translateY(0)}
    .admin-menu-card[disabled]{opacity:.55;cursor:not-allowed;transform:none}
    .admin-menu-top{display:flex;align-items:center;gap:10px}
    .admin-menu-ico{width:28px;height:28px;display:grid;place-items:center;border-radius:10px;background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.10)}
    .admin-menu-title{font-weight:700;margin:0}
    .admin-menu-desc{margin:6px 0 0 0;color:rgba(255,255,255,.78);font-size:.95rem;line-height:1.25}

    .admin-section{display:none}
    .admin-section.active{display:block}

    .admin-section-head{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .admin-backlink{display:inline-flex;gap:8px;align-items:center}
  </style>
</head>
<body>
  <div class="topbar">
    <div class="brand">Bit√°cora Virtual</div>
    <div class="topbar-right">
      <button id="btnLogout" class="secondary">Salir</button>
    </div>
  </div>

  <div class="container">

    <!-- INICIO / MENU -->
    <div id="sectionHome" class="card admin-section active">
      <h2 style="margin-bottom:6px;">Inicio</h2>
      <div class="muted">Accesos directos:</div>

      <div class="admin-menu-grid">
        <button id="navInvite" class="admin-menu-card" type="button">
          <div class="admin-menu-top">
            <div class="admin-menu-ico">üë§</div>
            <div>
              <div class="admin-menu-title">Invitar usuario</div>
            </div>
          </div>
          <p class="admin-menu-desc">Crear usuarios e invitar por correo.</p>
        </button>

        <button id="navCalendar" class="admin-menu-card" type="button">
          <div class="admin-menu-top">
            <div class="admin-menu-ico">üóìÔ∏è</div>
            <div>
              <div class="admin-menu-title">Calendario / Actividades</div>
            </div>
          </div>
          <p class="admin-menu-desc">Eventos y recordatorios (estructura lista).</p>
        </button>

        <button id="navAnnouncements" class="admin-menu-card" type="button">
          <div class="admin-menu-top">
            <div class="admin-menu-ico">üì£</div>
            <div>
              <div class="admin-menu-title">Anuncios</div>
            </div>
          </div>
          <p class="admin-menu-desc">Publicaciones y avisos.</p>
        </button>

        <button id="navMaterials" class="admin-menu-card" type="button" disabled>
          <div class="admin-menu-top">
            <div class="admin-menu-ico">üìö</div>
            <div>
              <div class="admin-menu-title">Material de Apoyo</div>
            </div>
          </div>
          <p class="admin-menu-desc">Im√°genes y recursos est√°ticos (pr√≥ximamente).</p>
        </button>
      </div>
    </div>

    <!-- INVITAR USUARIO -->
    <div id="sectionInvite" class="card admin-section">
      <div class="admin-section-head">
        <h2 style="margin:0;">Invitar usuario</h2>
        <button id="backFromInvite" class="secondary" type="button">Volver al inicio</button>
      </div>

      <div style="margin-top:14px;">
        <label>Email</label>
        <input id="inviteEmail" type="email" placeholder="usuario@correo.com" />

        <label>Nombre completo</label>
        <input id="inviteName" type="text" placeholder="Nombre Apellido" />

        <label>Rol</label>
        <div style="display:flex;flex-wrap:wrap;gap:16px;margin-top:6px;">
          <label style="display:flex;gap:8px;align-items:center;margin:0;">
            <input type="radio" name="inviteRole" value="user" checked />
            <span>Lider_de_C√©lula</span>
          </label>
          <label style="display:flex;gap:8px;align-items:center;margin:0;">
            <input type="radio" name="inviteRole" value="leader" />
            <span>Lider_de_Escuadron</span>
          </label>
          <label style="display:flex;gap:8px;align-items:center;margin:0;">
            <input type="radio" name="inviteRole" value="admin" />
            <span>Admin_del_App</span>
          </label>
        </div>

        <label style="margin-top:14px;">Divisi√≥n</label>
        <div style="display:flex;flex-wrap:wrap;gap:16px;margin-top:6px;">
          <label style="display:flex;gap:8px;align-items:center;margin:0;">
            <input type="checkbox" name="inviteDivision" value="makers" />
            <span>Makers</span>
          </label>
          <label style="display:flex;gap:8px;align-items:center;margin:0;">
            <input type="checkbox" name="inviteDivision" value="takers" />
            <span>Takers</span>
          </label>
        </div>

        <label style="margin-top:14px;">Escuadr√≥n</label>
        <div style="display:grid;gap:16px;margin-top:6px;">
          <div>
            <div class="muted small" style="font-weight:600;">Makers</div>
            <div style="display:flex;flex-wrap:wrap;gap:16px;margin-top:6px;">
              <label style="display:flex;gap:8px;align-items:center;margin:0;"><input type="checkbox" name="inviteSquad" value="URM" /><span>URM</span></label>
              <label style="display:flex;gap:8px;align-items:center;margin:0;"><input type="checkbox" name="inviteSquad" value="UVM" /><span>UVM</span></label>
              <label style="display:flex;gap:8px;align-items:center;margin:0;"><input type="checkbox" name="inviteSquad" value="UAM" /><span>UAM</span></label>
              <label style="display:flex;gap:8px;align-items:center;margin:0;"><input type="checkbox" name="inviteSquad" value="UNM" /><span>UNM</span></label>
              <label style="display:flex;gap:8px;align-items:center;margin:0;"><input type="checkbox" name="inviteSquad" value="UAZM" /><span>UAZM</span></label>
            </div>
          </div>
          <div>
            <div class="muted small" style="font-weight:600;">Takers</div>
            <div style="display:flex;flex-wrap:wrap;gap:16px;margin-top:6px;">
              <label style="display:flex;gap:8px;align-items:center;margin:0;"><input type="checkbox" name="inviteSquad" value="URT" /><span>URT</span></label>
              <label style="display:flex;gap:8px;align-items:center;margin:0;"><input type="checkbox" name="inviteSquad" value="UVT" /><span>UVT</span></label>
              <label style="display:flex;gap:8px;align-items:center;margin:0;"><input type="checkbox" name="inviteSquad" value="UAT" /><span>UAT</span></label>
              <label style="display:flex;gap:8px;align-items:center;margin:0;"><input type="checkbox" name="inviteSquad" value="UNT" /><span>UNT</span></label>
              <label style="display:flex;gap:8px;align-items:center;margin:0;"><input type="checkbox" name="inviteSquad" value="UAZT" /><span>UAZT</span></label>
            </div>
          </div>
        </div>

        <button id="btnInvite" style="margin-top:14px;">Enviar invitaci√≥n</button>
        <p id="msg" class="msg"></p>
      </div>
    </div>

    <!-- CALENDARIO / ACTIVIDADES -->
    <div id="sectionCalendar" class="card admin-section">
      <div class="admin-section-head">
        <h2 style="margin:0;">Calendario / Actividades</h2>
        <button id="backFromCalendar" class="secondary" type="button">Volver al inicio</button>
      </div>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;align-items:end;margin-top:14px;">
        <div style="grid-column:1 / -1;">
          <label>Actividad</label>
          <input id="calActivity" type="text" placeholder="Ej: Reuni√≥n, Visita, Evento..." />
        </div>

        <div>
          <label>Fecha</label>
          <input id="calEventDate" type="date" />
        </div>

        <div>
          <label>Encargado</label>
          <input id="calOwnerName" type="text" placeholder="Nombre del encargado" />
        </div>

        <div>
          <label>Contacto</label>
          <input id="calContactPhone" type="text" placeholder="Tel√©fono" />
        </div>

        <div>
          <label>Inversi√≥n</label>
          <input id="calInvestment" type="number" step="0.01" placeholder="0" />
        </div>

        <div style="display:flex;gap:10px;justify-content:flex-end;">
          <button id="calBtnSave">Crear actividad</button>
          <button id="calBtnCancel" class="secondary" style="display:none;">Cancelar</button>
        </div>
      </div>

      <div style="overflow:auto;margin-top:14px;">
        <table style="width:100%;border-collapse:collapse;min-width:720px;">
          <thead>
            <tr>
              <th style="text-align:left;padding:8px;border-bottom:1px solid rgba(255,255,255,0.12);">Actividad</th>
              <th style="text-align:left;padding:8px;border-bottom:1px solid rgba(255,255,255,0.12);">Fecha</th>
              <th style="text-align:left;padding:8px;border-bottom:1px solid rgba(255,255,255,0.12);">Encargado</th>
              <th style="text-align:left;padding:8px;border-bottom:1px solid rgba(255,255,255,0.12);">Contacto</th>
              <th style="text-align:left;padding:8px;border-bottom:1px solid rgba(255,255,255,0.12);">Inversi√≥n</th>
              <th style="text-align:left;padding:8px;border-bottom:1px solid rgba(255,255,255,0.12);">Acciones</th>
            </tr>
          </thead>
          <tbody id="calTbody">
            <tr><td colspan="6" style="padding:10px;" class="muted">Cargando‚Ä¶</td></tr>
          </tbody>
        </table>
      </div>

      <p id="calMsg" class="msg"></p>
    </div>

    <!-- BLOQUES FUTUROS (por ahora en blanco) -->
    <div id="sectionAnnouncements" class="card admin-section">
      <div class="admin-section-head">
        <h2 style="margin:0;">Anuncios</h2>
        <button id="backFromAnnouncements" class="secondary" type="button">Volver al inicio</button>
      </div>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;align-items:end;margin-top:14px;">
        <div style="grid-column:1 / -1;">
          <label>T√≠tulo (opcional)</label>
          <input id="annTitle" type="text" placeholder="Ej: Aviso importante" />
        </div>

        <div style="grid-column:1 / -1;">
          <label>Imagen</label>
          <input id="annFile" type="file" accept="image/*" />
          <div class="muted small" style="margin-top:6px;">Se sube a Storage (bucket <b>announcements</b>) y se guarda el <b>image_url</b> en la tabla.</div>
        </div>

        <div style="display:flex;gap:10px;justify-content:flex-end;grid-column:1 / -1;">
          <button id="annBtnPublish" type="button">Publicar anuncio</button>
        </div>
      </div>

      <div style="margin-top:14px;">
        <div class="muted" style="margin-bottom:8px;">√öltimos anuncios</div>
        <div id="annList" style="display:grid;gap:10px;"></div>
      </div>

      <p id="annMsg" class="msg"></p>
    </div>

    <div id="sectionMaterials" class="card admin-section">
      <div class="admin-section-head">
        <h2 style="margin:0;">Material de Apoyo</h2>
        <button id="backFromMaterials" class="secondary" type="button">Volver al inicio</button>
      </div>
      <p class="muted" style="margin-top:14px;">Pr√≥ximamente.</p>
    </div>

  </div>

  <script type="module" src="./admin.js"></script>
</body>
</html>
